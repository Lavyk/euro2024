{{#> layout}}
{{#*inline "head"}}
<link rel="canonical" href="/highscore">
<title>Highscore - Euro 2016</title>
{{/inline}}
{{#*inline "body"}}
{{> navbar}}
<div class="container">

<input type="hidden" name="_csrf" value="{{csrfToken}}">

{{#if loggedIn}}
<p>
{{#if friends}}
<a href="/highscore">Show all</a>
{{else}}
<a href="/highscore?friends=1">Show only friends</a>
{{/if}}
</p>
{{/if}}

{{#if friends}}
<canvas id="friend-history" width="100" height="30"></canvas>
{{/if}}

<table class="table table-striped">
<tr>
    <th></th>
    <th>
    {{#if orderName}}
        <span class="ordered-column">Name</span>
    {{else}}
        <a href="/highscore?order=name{{#if friends}}&friends=1{{/if}}">Name</a>
    {{/if}}
    </th>
    <th>
    {{#if orderScore}}
        <span class="ordered-column">Score</span>
    {{else}}
        <a href="/highscore{{#if friends}}?friends=1{{/if}}">Score</a>
    {{/if}}
    </th>
    <th title="Correct bet">
    {{#if order3}}
        <span class="ordered-column">{{> correct_bet}}</span>
    {{else}}
        <a href="/highscore?order=3{{#if friends}}&friends=1{{/if}}">{{> correct_bet}}</a>
    {{/if}}
    </th>
    <th title="Correct goal difference">
    {{#if order2}}
        <span class="ordered-column">{{> correct_diff}}</span>
    {{else}}
        <a href="/highscore?order=2{{#if friends}}&friends=1{{/if}}">{{> correct_diff}}</a>
    {{/if}}
    </th>
    <th title="Correct winner">
    {{#if order1}}
        <span class="ordered-column">{{> correct_winner}}</span>
    {{else}}
        <a href="/highscore?order=1{{#if friends}}&friends=1{{/if}}">{{> correct_winner}}</a>
    {{/if}}
    </th>
    <th title="Wrong bet">
    {{#if order0}}
        <span class="ordered-column">{{> wrong_bet}}</span>
    {{else}}
        <a href="/highscore?order=0{{#if friends}}&friends=1{{/if}}">{{> wrong_bet}}</a>
    {{/if}}
    </th>
    {{#if loggedIn}}<th><span title="Friends">&#x1F465;</span></th>{{/if}}
</tr>
{{#each users}}
<tr {{#if isme}}class="user-is-me"{{/if}} {{#if isfriend}}class="user-is-friend"{{/if}}>
    <td>{{rank}}.</td>
    <td>
        {{#if (gt0 history)}}
        <span class="history-up" title="{{history}}">&#x2191;</span>
        {{/if}}
        {{#if (lt0 history)}}
        <span class="history-down" title="{{history}}">&#x2193;</span>
        {{/if}}
        <a href="{{@origin}}/user/{{id}}">{{name}}</a>
    </td>
    <td class="{{#if (isZero score)}}is-zero{{/if}}">{{score}}</td>
    <td class="{{#if (isZero count3)}}is-zero{{/if}}">{{count3}}</td>
    <td class="{{#if (isZero count2)}}is-zero{{/if}}">{{count2}}</td>
    <td class="{{#if (isZero count1)}}is-zero{{/if}}">{{count1}}</td>
    <td class="{{#if (isZero count0)}}is-zero{{/if}}">{{count0}}</td>
    {{#if @root.loggedIn}}
    <td>
        {{#if isme}}
        <span title="That's you!">&#x1F464;</span>
        {{else}}
        <button data-id="{{id}}" {{#if isfriend}}disabled{{/if}} class="add-friend btn btn-default btn-xs">&#x2795;</button>
        <button data-id="{{id}}" {{#if isfriend}}{{else}}disabled{{/if}} class="remove-friend btn btn-default btn-xs">&#x2796;</button>
        {{/if}}
    </td>
    {{/if}}
</tr>
{{/each}}
</table>
</div>
{{/inline}}
{{/layout}}
